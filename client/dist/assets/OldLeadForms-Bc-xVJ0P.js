import{r as l,u as k,j as e,m as h}from"./index-DodWdPz7.js";import{b as R}from"./lead-DxPnP4UC.js";import{L as O}from"./Loader-DZc2yNC9.js";import{E as _}from"./EmptyState-CrWfoHli.js";import{C as z,F as A}from"./index-qsRjlaEg.js";import"./index-SeQtBOfL.js";const Y=()=>{const[m,u]=l.useState(""),[y,f]=l.useState(""),[j,w]=l.useState(""),[g,b]=l.useState(""),[N,C]=l.useState(30),v=l.useRef(null),F=l.useRef(null),D=l.useRef(null);l.useEffect(()=>{const t=v.current,r=F.current;if(!t||!r)return;const o=()=>r.scrollLeft=t.scrollLeft,s=()=>t.scrollLeft=r.scrollLeft;return t.addEventListener("scroll",o),r.addEventListener("scroll",s),()=>{t.removeEventListener("scroll",o),r.removeEventListener("scroll",s)}});const[a,d]=l.useState(1),{data:p,refetch:i,isLoading:P,isFetching:L}=k({queryKey:["old-leadforms",a],queryFn:()=>R(m,y,j,g,a,N),placeholderData:!0}),n=p?.leads?.json,S=()=>{u(""),f(""),w(""),b(""),i()},E=[30,50,100,500,1e3];return e.jsx(e.Fragment,{children:e.jsx("div",{className:"overflow-hidden",children:e.jsxs("div",{className:"p-5",children:[e.jsxs(h.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:0},children:[e.jsxs("div",{className:"grid grid-cols-5 gap-x-3 gap-y-3",children:[e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("label",{htmlFor:"phone",children:"Phone"}),e.jsx("input",{autoComplete:"off",type:"text",name:"phone",placeholder:"PHONE",value:m,onChange:t=>u(t?.target?.value),onKeyDown:t=>{t.key==="Enter"&&i()},id:"phone",className:"border border-gray-400 px-3 py-1 rounded-md outline-none"})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("label",{htmlFor:"post",children:"Post Code"}),e.jsx("input",{autoComplete:"off",type:"text",name:"post",placeholder:"POST CODE",value:y,onChange:t=>f(t?.target?.value),onKeyDown:t=>{t.key==="Enter"&&i()},id:"post",className:"border border-gray-400 px-3 py-1 rounded-md outline-none"})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("label",{htmlFor:"fromDate",children:"From Date"}),e.jsx("input",{type:"date",name:"fromDate",value:j,id:"fromDate",onChange:t=>w(t.target.value),className:"border border-gray-400 px-3 py-1 rounded-md outline-none"})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("label",{htmlFor:"toDate",children:"To Date"}),e.jsx("input",{type:"date",name:"toDate",value:g,id:"toDate",onChange:t=>b(t.target.value),className:"border border-gray-400 px-3 py-1 rounded-md outline-none"})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("label",{htmlFor:"limit",children:"Limit Per Page"}),e.jsx("select",{name:"limit",onChange:t=>C(t?.target?.value),id:"limit",className:"border outline-none border-gray-400 px-3 py-1 rounded-md",children:E?.map(t=>e.jsx("option",{value:t,children:t},t))})]})]}),e.jsxs("div",{className:"mb-10 mt-3 flex items-center gap-2 text-sm",children:[e.jsx("button",{onClick:()=>i(),className:"bg-green-500 text-white px-10 py-1 rounded-md cursor-pointer",children:"Search"}),e.jsx("button",{onClick:S,className:"bg-sky-500 text-white px-10 py-1 rounded-md cursor-pointer",children:"Reset Filters"})]})]}),e.jsxs(h.div,{initial:{opacity:0,scale:1.2},animate:{opacity:1,scale:1},transition:{duration:.5},className:"mb-5 text-gray-900 bg-white flex justify-between items-center",children:[e.jsx("p",{className:"text-3xl font-semibold uppercase origin-center w-fit",children:"Leads - All Old Lead Forms"}),e.jsx(z,{data:n||[],filename:"OldLeadForms.csv",children:e.jsxs("button",{className:"py-1.5 px-7 bg-green-700 text-white rounded-md text-sm flex gap-1 items-center cursor-pointer",children:[e.jsx(A,{className:"text-lg"})," Export as CSV"]})})]}),e.jsxs(h.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative overflow-x-auto shadow-md sm:rounded-lg w-full",children:[e.jsx("div",{ref:v,style:{overflowX:"auto",overflowY:"hidden",height:"20px"},children:e.jsx("div",{style:{width:"2000px",height:"1px"}})}),e.jsxs("div",{ref:F,style:{overflowX:"auto",overflowY:"hidden",width:"100%"},children:[(P||L)&&e.jsx(O,{}),n?.length>0&&!L&&e.jsxs("table",{ref:D,className:"text-sm text-left rtl:text-right text-gray-500",children:[e.jsx("thead",{className:"text-center text-gray-700 uppercase bg-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"whitespace-nowrap px-6 py-3",children:"Sr. No."}),e.jsx("th",{scope:"col",className:"whitespace-nowrap px-6 py-3",children:"date"}),e.jsx("th",{scope:"col",className:"whitespace-nowrap px-6 py-3",children:"salutation"}),e.jsx("th",{scope:"col",className:"whitespace-nowrap px-6 py-3",children:"First Name"}),e.jsx("th",{scope:"col",className:"whitespace-nowrap px-6 py-3",children:"Last Name"}),e.jsx("th",{scope:"col",className:"whitespace-nowrap px-6 py-3",children:"Post Code"}),e.jsx("th",{scope:"col",className:"whitespace-nowrap px-6 py-3",children:"Phone No."}),e.jsx("th",{scope:"col",className:"whitespace-nowrap px-6 py-3",children:"Process"})]})}),e.jsx("tbody",{children:n?.map((t,r)=>e.jsxs("tr",{className:"text-slate-800 font-semibold capitalize text-center border-b :border-gray-700 border-gray-200",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap :text-white",children:(a-1)*N+r+1}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap uppercase",children:new Date(t?.sale_date).toDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap uppercase",children:t?.cust_title}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap uppercase",children:t?.cust_first_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap uppercase",children:t?.cust_last_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap uppercase",children:t?.pincode}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t?.phone}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap uppercase",children:t?.process}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap uppercase",children:t?.plan?.name})]},t?.id))})]}),(!n||n.length===0)&&e.jsx(_,{})]})]}),n?.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 items-center w-fit mx-auto",children:[e.jsx("button",{disabled:a===1,onClick:()=>d(t=>Math.max(t-1,1)),className:"bg-red-500 text-white text-xs font-semibold px-6 py-1 rounded-md capitalize cursor-pointer disabled:cursor-not-allowed",children:"Prev"}),(()=>{const t=p?.totalPages||0,r=5;let o=[];if(t<=7)o=Array.from({length:t},(s,c)=>c+1);else{o.push(1),a>r&&o.push("...");const s=Math.max(2,a-2),c=Math.min(t-1,a+2);for(let x=s;x<=c;x++)o.push(x);a<t-(r-1)&&o.push("..."),o.push(t)}return o.map((s,c)=>s==="..."?e.jsx("span",{className:"px-3 py-1",children:"..."},c):e.jsx("button",{onClick:()=>d(s),className:`text-xs font-semibold px-6 py-1 rounded-md capitalize cursor-pointer ${s===a?"bg-sky-500 text-white":"bg-white text-black border border-slate-400"}`,children:s},s))})(),e.jsx("button",{disabled:a===p?.totalPages,onClick:()=>d(t=>t+1),className:"bg-blue-700 text-white text-xs font-semibold px-6 py-1 rounded-md capitalize cursor-pointer disabled:cursor-not-allowed",children:"Next"})]})]})})})};export{Y as default};
