import{r as h,c as V,d as U,e as D,u as i,j as e,m as o,V as L}from"./index-_7Kt66s7.js";import{u as T}from"./useMutation-DU8bvPR1.js";import{v as N,c as B}from"./index-Cbi6rauC.js";import{g as I}from"./process-DEwozMBz.js";import{g as O}from"./plan-Csn77Bx3.js";import{g as K}from"./user-CVQ9OdHo.js";const W=()=>{const b=new Date().toString().substring(4,15),[m,x]=h.useState(""),{register:a,unregister:t,formState:{errors:s},handleSubmit:y,watch:c,reset:j,control:f,trigger:p}=V({defaultValues:{centre:"001"}}),{fields:g,append:v,remove:P}=U({control:f,name:"appliances"}),F=D(),{data:k}=i({queryKey:["process"],queryFn:I}),{data:C}=i({queryKey:["plan"],queryFn:O}),{data:S}=i({queryKey:["user"],queryFn:K}),d=c("process"),n=c("paymentMethod"),A=l=>C?.filter(r=>l==r?.processId),u=S?.filter(l=>l?.role==="closer"||l?.role==="verifier"),{mutate:q,isPending:E}=T({mutationFn:l=>B(l),onSuccess:l=>{l?.id&&(L.success("Lead Created Successfully!"),F.invalidateQueries({queryKey:["leads"]}),j())}});h.useEffect(()=>{n==="demandDraft"?(t("card"),a("bank")):t("bank"),n==="card"?(t("bank"),a("card")):t("card"),d&&+d!=7?a("appliances"):t("appliances")},[a,t,n]);const M=l=>{console.log(l),q(l)},w=c("card.cardNumber");return e.jsx("div",{className:"overflow-y-scroll h-full",children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"mb-5  text-gray-900 bg-white ",children:[e.jsxs(o.div,{initial:{opacity:0,scale:1.2},animate:{opacity:1,scale:1},transition:{duration:.5},className:"flex justify-between items-center origin-center",children:[e.jsx("p",{className:"text-3xl font-semibold uppercase",children:"Add A New Lead"}),e.jsx("div",{className:"py-1.5 px-10 bg-blue-700 text-white rounded-md text-sm",children:b})]}),e.jsxs(o.p,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.25},className:"mt-1 text-sm font-normal text-gray-700 w-[50%]",children:["Start Adding Leads Now & Expand Your Reach. ",e.jsx("br",{})," Your Gateway to New Connections."]})]}),e.jsxs(o.form,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},onSubmit:y(M),autoComplete:"off",children:[e.jsx("p",{className:"mb-4 text-2xl font-semibold italic text-black/80 underline",children:"Customer Information"}),e.jsxs("div",{className:"grid grid-cols-4 gap-x-4 my-5",children:[e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsxs("label",{htmlFor:"title",className:"font-semibold",children:["Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...a("title",{required:"Please select Title."}),id:"title",defaultValue:"1",className:"border outline-none border-gray-400 px-3 py-1 rounded",children:[e.jsx("option",{value:"Mr.",children:"Mr."}),e.jsx("option",{value:"Mrs.",children:"Mrs."}),e.jsx("option",{value:"Miss",children:"Miss"}),e.jsx("option",{value:"Ms",children:"Ms"})]}),s?.title&&e.jsx("p",{className:"text-red-500",children:s?.title?.message})]}),e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsxs("label",{htmlFor:"firstName",className:"font-semibold",children:["First Name"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...a("firstName",{required:"Please Enter First Name."}),id:"firstName",placeholder:"First Name",className:"border border-gray-400 px-3 py-1 rounded outline-none"}),s?.firstName&&e.jsx("p",{className:"text-red-500",children:s?.firstName?.message})]}),e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"middleName",className:"font-semibold",children:"Middle Name"}),e.jsx("input",{type:"text",...a("middleName"),id:"middleName",placeholder:"Middle Name",className:"border border-gray-400 px-3 py-1 rounded outline-none"})]}),e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsxs("label",{htmlFor:"lastName",className:"font-semibold",children:["Last Name"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...a("lastName",{required:"Please Enter Last Name."}),id:"lastName",placeholder:"Last Name",className:"border border-gray-400 px-3 py-1 rounded outline-none"}),s?.lastName&&e.jsx("p",{className:"text-red-500",children:s?.lastName?.message})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-x-4 my-5",children:[e.jsxs("div",{className:"flex flex-col text-sm",children:[e.jsxs("label",{htmlFor:"centre",className:"font-semibold",children:["Centre ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...a("centre",{required:"Please Enter Centre Name."}),id:"centre",placeholder:"Centre",className:"border border-gray-400 px-3 py-1 rounded outline-none"}),s?.centre&&e.jsx("p",{className:"text-red-500",children:s?.centre?.message})]}),e.jsxs("div",{className:"flex flex-col text-sm col-span-3",children:[e.jsx("label",{htmlFor:"address",className:"font-semibold",children:"Address"}),e.jsx("textarea",{...a("address"),id:"address",placeholder:"Address",className:"border border-gray-400 px-3 py-1 rounded outline-none"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-x-4 gap-y-4 my-5",children:[e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"city",className:"font-semibold",children:"City"}),e.jsx("input",{type:"text",...a("city"),id:"city",placeholder:"West Bridgford",className:"border border-gray-400 px-3 py-1 rounded outline-none"})]}),e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"county",className:"font-semibold",children:"County"}),e.jsx("input",{type:"text",...a("county"),id:"county",placeholder:"Nottinghamshire",className:"border border-gray-400 px-3 py-1 rounded outline-none"})]}),e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsxs("label",{htmlFor:"pinCode",className:"font-semibold",children:["Pin Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...a("pincode",{required:"Please Enter Pincode."}),id:"pinCode",placeholder:"700001",className:"border border-gray-400 px-3 py-1 rounded outline-none"}),s?.pincode&&e.jsx("p",{className:"text-red-500",children:s?.pincode?.message})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-x-4 gap-y-4 my-5",children:[e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"password",className:"font-semibold",children:"Password"}),e.jsx("input",{type:"password",...a("password"),id:"password",placeholder:"***********",className:"border border-gray-400 px-3 py-1 rounded outline-none"})]}),e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"dob",className:"font-semibold",children:"Date of Birth"}),e.jsx("input",{type:"date",...a("dateOfBirth"),id:"dob",className:"border border-gray-400 px-3 py-1 rounded outline-none"})]}),e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsxs("label",{htmlFor:"phoneNumber",className:"font-semibold",children:["Phone Number"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",maxLength:10,...a("phone",{required:"Please Enter Phone Number."}),id:"phone",placeholder:"(033) 2347 9645",className:"border border-gray-400 px-3 py-1 rounded outline-none"}),s?.phone&&e.jsx("p",{className:"text-red-500",children:s?.phone?.message})]}),e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"poa",className:"font-semibold",children:"Power Of Attorney"}),e.jsxs("select",{...a("poa",{required:"Please Select Yes/No."}),id:"poa",defaultValue:"",className:"border outline-none border-gray-400 px-3 py-1 rounded",children:[e.jsx("option",{disabled:!0,selected:!0,value:"",children:"Select Yes/No."}),e.jsx("option",{value:"true",children:"YES"}),e.jsx("option",{value:"false",children:"NO"})]}),s?.poa&&e.jsx("p",{className:"text-red-500",children:s?.poa?.message})]})]}),e.jsx("p",{className:"mb-4 mt-16 text-2xl font-semibold italic text-black/80 underline",children:"Customer Plan and Product Details"}),e.jsxs("div",{className:"grid grid-cols-4 gap-x-4 gap-y-4 my-5",children:[e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"process",className:"font-semibold",children:"Select Process"}),e.jsxs("select",{...a("process",{required:"Please Select a Process."}),id:"process",defaultValue:"",className:"border outline-none border-gray-400 px-3 py-1 rounded",children:[e.jsx("option",{disabled:!0,selected:!0,value:"",children:"Select a Process"}),k?.map(l=>e.jsx("option",{value:l?.id,children:l?.name?.toUpperCase()},l?.id))]}),s?.process&&e.jsx("p",{className:"text-red-500",children:s?.process?.message})]}),e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"plan",className:"font-semibold",children:"Plan"}),e.jsxs("select",{...a("plan",{required:"Please Select a Plan."}),id:"plan",defaultValue:"",className:"border outline-none border-gray-400 px-3 py-1 rounded",children:[e.jsx("option",{disabled:!0,selected:!0,value:"",children:"Select a Plan"}),A(d)?.map(l=>e.jsx("option",{value:l?.id,children:l?.name?.toUpperCase()},l?.id))]}),s?.plan&&e.jsx("p",{className:"text-red-500",children:s?.plan?.message})]}),e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"closer",className:"font-semibold",children:"Closer"}),e.jsxs("select",{...a("closer",{required:"Please Select a Closer."}),id:"closer",className:"border outline-none border-gray-400 px-3 py-1 rounded",children:[e.jsx("option",{selected:!0,value:"",children:"Select a Closer"}),u?.map(l=>e.jsx("option",{value:l?.id,children:l?.alias?.toUpperCase()},l?.id))]}),s?.closer&&e.jsx("p",{className:"text-red-500",children:s?.closer?.message})]}),e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"verifier",className:"font-semibold",children:"Verifier"}),e.jsxs("select",{...a("verifier",{required:"Please Select a Verifier."}),id:"verifier",className:"border outline-none border-gray-400 px-3 py-1 rounded",children:[e.jsx("option",{selected:!0,value:"",children:"Select a Verifier"}),u?.map(l=>e.jsx("option",{value:l?.id,children:l?.alias?.toUpperCase()},l?.id))]}),s?.verifier&&e.jsx("p",{className:"text-red-500",children:s?.verifier?.message})]})]}),d&&+d!=7?e.jsxs("div",{className:"my-5",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"capitalize text underline font-semibold italic",children:"applaince details"}),e.jsx("button",{type:"button",onClick:()=>v({name:"",makeOfAppliance:"",age:0}),className:"bg-blue-700 text-white text-xs font-semibold py-1.5 px-6 mt-2 rounded cursor-pointer",children:"+ Add Fields"})]}),g?.map((l,r)=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-x-4 gap-y-4 mt-3",children:[e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"appliance",className:"font-semibold",children:"Appliance Name"}),e.jsx("input",{type:"text",...a(`appliances.${r}.name`,{required:"Please Enter Appliance Name."}),id:"applianceName",placeholder:"Nottinghamshire",className:"border border-gray-400 px-3 py-1 rounded outline-none"})]}),e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"makeOfAppliance",className:"font-semibold",children:"Make of Appliance"}),e.jsx("input",{type:"text",...a(`appliances.${r}.makeOfAppliance`,{required:"Please Enter Make of Appliance."}),id:"makeOfAppliance",placeholder:"Make Of Appliance",className:"border border-gray-400 px-3 py-1 rounded outline-none"})]}),e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"age",className:"font-semibold",children:"Age"}),e.jsx("input",{type:"number",...a(`appliances.${r}.age`,{required:"Please Enter Appliance Age."}),id:"age",placeholder:"10",className:"border border-gray-400 px-3 py-1 rounded-md outline-none"})]})]},l.id),e.jsx("button",{type:"button",onClick:()=>P(r),className:"bg-red-500 text-white text-xs font-semibold py-0.5 px-6 mt-2 rounded cursor-pointer",children:"Remove"})]}))]}):e.jsx(e.Fragment,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-4 my-5",children:[e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"paymentMethod",className:"font-semibold",children:"Select Payment Method"}),e.jsxs("select",{...a("paymentMethod",{required:"Please Select a Payment Method."}),id:"paymentMethod",className:"border outline-none border-gray-400 px-3 py-1 rounded",children:[e.jsx("option",{disabled:!0,selected:!0,value:"",children:"Select a Payment Method"}),e.jsx("option",{value:"cash/cheque",children:"Cash/Cheque"}),e.jsx("option",{value:"directDebit",children:"Direct Debit (DD)"}),e.jsx("option",{value:"card",children:"Card"})]}),s?.paymentMethod&&e.jsx("p",{className:"text-red-500",children:s?.paymentMethod?.message})]}),e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"shift",className:"font-semibold",children:"Shift"}),e.jsxs("select",{...a("shift",{required:"Please Select a Shift."}),id:"shift",className:"border outline-none border-gray-400 px-3 py-1 rounded",children:[e.jsx("option",{selected:!0,value:"UNITED KINGDOM (UK)",children:"UNITED KINGDOM (UK)"}),e.jsx("option",{value:"UNITED STATES (US)",children:"UNITED STATES (US)"}),e.jsx("option",{value:"AUSTRALIA",children:"AUSTRALIA (AU)"})]}),s?.shift&&e.jsx("p",{className:"text-red-500",children:s?.shift?.message})]})]}),n==="directDebit"&&e.jsxs("div",{className:"my-5",children:[e.jsx("p",{className:"capitalize text underline font-semibold italic",children:"bank account details"}),e.jsxs("div",{className:"grid grid-cols-4 gap-x-4 gap-y-4",children:[e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"bankName",className:"font-semibold",children:"Bank Name"}),e.jsx("input",{type:"text",...a("bank.bankName",{required:"Please Enter Bank Name."}),id:"bankName",placeholder:"Bank of UK.",className:"border border-gray-400 px-3 py-1 rounded outline-none"}),s?.bank?.bankName&&e.jsx("p",{className:"text-red-500",children:s?.bank?.bankName?.message})]}),e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"accountName",className:"font-semibold",children:"Account Name"}),e.jsx("input",{type:"text",...a("bank.accountName",{required:"Please Enter Account Name."}),id:"accountName",placeholder:"Steve Balmer",className:"border border-gray-400 px-3 py-1 rounded outline-none"}),s?.bank?.accountName&&e.jsx("p",{className:"text-red-500",children:s?.bank?.accountName?.message})]}),e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"accountNumber",className:"font-semibold",children:"Account Number"}),e.jsx("input",{type:"text",...a("bank.accountNumber",{required:"Please Enter Account Number."}),id:"accountNumber",placeholder:"000405007899",className:"border border-gray-400 px-3 py-1 rounded outline-none"}),s?.bank?.accountNumber&&e.jsx("p",{className:"text-red-500",children:s?.bank?.accountNumber?.message})]}),e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"sort",className:"font-semibold",children:"SORT Code"}),e.jsx("input",{type:"text",...a("bank.sort",{required:"Please Enter Sort Code."}),id:"sort",placeholder:"******",className:"border border-gray-400 px-3 py-1 rounded outline-none"}),s?.bank?.sort&&e.jsx("p",{className:"text-red-500",children:s?.bank?.sort?.message})]})]})]}),n==="card"&&e.jsxs("div",{className:"my-5",children:[e.jsx("p",{className:"capitalize text underline font-semibold italic",children:"card details"}),e.jsxs("div",{className:"grid grid-cols-8 gap-x-4 gap-y-4 ",children:[e.jsxs("div",{className:"col-span-2 flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"cardName",className:"font-semibold",children:"Name"}),e.jsx("input",{type:"text",...a("card.name",{required:"Please Enter Card Holder's Name."}),id:"cardName",placeholder:"Steve Morrison",className:"border border-gray-400 px-3 py-1 rounded outline-none"}),s?.card?.name&&e.jsx("p",{className:"text-red-500",children:s?.card?.name?.message})]}),e.jsxs("div",{className:"col-span-2 flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"cardBankName",className:"font-semibold",children:"Bank Name"}),e.jsx("input",{type:"text",...a("card.bankName",{required:"Please Enter Bank Name."}),id:"cardBankName",placeholder:"Bank of UK",className:"border border-gray-400 px-3 py-1 rounded outline-none"}),s?.card?.bankName&&e.jsx("p",{className:"text-red-500",children:s?.card?.bankName?.message})]}),e.jsxs("div",{className:"col-span-2 flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"cardNumber",className:"font-semibold",children:"Card Number"}),e.jsx("input",{type:"text",maxLength:16,...a("card.cardNumber",{onChange:()=>p("card.cardNumber"),required:"Please Enter Card Number.",validate:l=>{const r=N.number(l);if(r.card&&x(r.card.type),!r.isValid)return x(""),"Invalid Card."}}),id:"cardNumber",placeholder:"4242 4242 4242 4242",className:"border border-gray-400 px-3 py-1 rounded outline-none"}),e.jsxs("div",{className:"flex gap-3",children:[m&&w.length>0&&e.jsxs("p",{className:"text-green-600 uppercase ml-2",children:["✓ ",m]}),s?.card?.cardNumber&&e.jsx("p",{className:"text-red-500",children:s?.card?.cardNumber?.message})]})]}),e.jsxs("div",{className:"col-span-1 flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"expiry",className:"font-semibold",children:"Card Expiry"}),e.jsx("input",{type:"text",maxLength:7,...a("card.expiry",{required:"Please Enter Card Expiry.",onChange:()=>p("card.expiry"),validate:l=>{const r=N.expirationDate(l);if(!r.isPotentiallyValid)return"Invalid Date.";if(r.isValid)return!0}}),id:"expiry",placeholder:"05/30",className:"border border-gray-400 px-3 py-1 rounded outline-none"}),s?.card?.expiry&&e.jsx("p",{className:"text-red-500",children:s?.card?.expiry?.message})]}),e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"cvv",className:"font-semibold",children:"Card CVV"}),e.jsx("input",{type:"text",maxLength:3,...a("card.cvv",{required:"Please Enter CVV."}),id:"cvv",placeholder:"424",className:"border border-gray-400 px-3 py-1 rounded outline-none"}),s?.card?.cvv&&e.jsx("p",{className:"text-red-500",children:s?.card?.cvv?.message})]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex flex-col text-sm space-y-0.5",children:[e.jsx("label",{htmlFor:"comments",className:"font-semibold",children:"Comments"}),e.jsx("textarea",{...a("comment"),rows:5,id:"comments",placeholder:"Comments if Any",className:"border border-gray-400 px-3 py-1 rounded outline-none"})]})}),e.jsx("div",{children:e.jsx("button",{disabled:E,className:"bg-blue-700 text-white px-10 py-2 rounded-md disabled:bg-blue-200 disabled:cursor-not-allowed",children:"SUBMIT"})})]})]})})};export{W as default};
