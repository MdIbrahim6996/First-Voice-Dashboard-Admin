import{r as n,u as j,j as e,m as r,o as i,y as N,z as b,B as f}from"./index-DodWdPz7.js";import{b as v}from"./userAttendance-C1jvRGK6.js";const M=()=>{const o=new Date,[d,x]=n.useState(o.getFullYear()),[l,p]=n.useState(o.getMonth()),[c,m]=n.useState(""),{data:a,refetch:h}=j({queryKey:["monthly-attendance"],queryFn:()=>v(d,l,c)});console.log(a);const u=t=>a?.isLateCount.find(s=>s.userId===t),y=t=>a?.onTimeCount.find(s=>s.userId===t),g=t=>a?.userData.find(s=>s.id===t);return e.jsx("div",{className:"overflow-hidden",children:e.jsxs("div",{className:"p-5",children:[e.jsxs(r.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:0},children:[e.jsxs("div",{className:"grid grid-cols-4 gap-x-5 gap-y-3",children:[e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("label",{htmlFor:"year",children:"Year"}),e.jsxs("select",{name:"year",id:"year",defaultValue:2025,onClick:t=>x(t.target.value),className:"border outline-none border-gray-400 px-3 py-1 rounded-md",children:[e.jsx("option",{value:2018,children:"2018"}),e.jsx("option",{value:2019,children:"2019"}),e.jsx("option",{value:2020,children:"2020"}),e.jsx("option",{value:2021,children:"2021"}),e.jsx("option",{value:2022,children:"2022"}),e.jsx("option",{value:2023,children:"2023"}),e.jsx("option",{value:2024,children:"2024"}),e.jsx("option",{value:2025,children:"2025"})]})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("label",{htmlFor:"month",children:"Month"}),e.jsxs("select",{name:"month",id:"month",onClick:t=>p(t.target.value),defaultValue:l,className:"border outline-none border-gray-400 px-3 py-1 rounded-md",children:[e.jsx("option",{value:"",disabled:!0,children:"Select a Month"}),i?.map((t,s)=>e.jsx("option",{value:s,children:t},s))]})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{type:"text",name:"name",id:"name",placeholder:"Name",value:c,onChange:t=>m(t.target.value),className:"border border-gray-400 px-3 py-1 rounded-md outline-none"})]})]}),e.jsxs("div",{className:"mb-10 mt-3 flex items-center gap-2 text-sm",children:[e.jsx("button",{onClick:()=>h(),className:"bg-green-500 text-white px-10 py-1 rounded-md cursor-pointer",children:"Search"}),e.jsx("button",{onClick:()=>{window.location.reload()},className:"bg-sky-500 text-white px-10 py-1 rounded-md cursor-pointer",children:"Reset Filters"})]})]}),e.jsx("div",{className:"mb-5  text-gray-900 bg-white ",children:e.jsx(r.p,{initial:{opacity:0,scale:1.2},animate:{opacity:1,scale:1},transition:{duration:.5},className:"text-3xl font-semibold uppercase origin-center w-fit",children:"My Workspaces - monthly attendances"})}),e.jsx(r.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative overflow-x-auto shadow-md sm:rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 ",children:[e.jsx("thead",{className:"text-center text-gray-700 uppercase bg-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Employee Id"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Year"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"month"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"days present"})]})}),e.jsx("tbody",{children:a?.attendance?.map(t=>e.jsxs("tr",{className:"capitalize text-center odd:bg-white odd::bg-gray-900 even:bg-gray-50 even::bg-gray-800 border-b :border-gray-700 border-gray-200",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap :text-white",children:t?.userId}),e.jsx("td",{className:"px-6 py-4",children:g(t?.userId)?.name}),e.jsx("td",{className:"px-6 py-4",children:"2025"}),e.jsx("td",{className:"px-6 py-4",children:i[l]}),e.jsxs("td",{className:"px-6 py-4 flex items-center flex-col space-y-1",children:[e.jsxs("p",{className:"bg-blue-500 flex items-center gap-x-2 text-white px-5 py-0.5 rounded w-fit",children:[e.jsx(N,{className:"text-lg"}),"Total :",t._count?._all]}),e.jsxs("p",{className:"bg-red-500 flex items-center gap-x-2 text-white px-5 py-0.5 rounded w-fit",children:[e.jsx(b,{className:"text-lg"}),"Late :",u(t?.userId)?._count?._all]}),e.jsxs("p",{className:"bg-green-500 flex items-center gap-x-2 text-white px-5 py-0.5 rounded w-fit",children:[e.jsx(f,{className:"text-lg"}),"OnTime :",y(t?.userId)?._count?._all]})]})]},t?.userId))})]})})]})})};export{M as default};
