import{c as b,e as p,V as f,j as e,m,r as c,u as v,l as S,M as C,f as E}from"./index-DodWdPz7.js";import{u as y}from"./useMutation-hiPJ6IwI.js";import{c as F,u as k,d as H,a as q}from"./holiday-O9sKb6su.js";import{D as M}from"./DeleteModal-CgHvfu17.js";const P=({handleClose:r})=>{const{register:s,handleSubmit:d,formState:{errors:a}}=b(),x=p(),l=y({mutationFn:n=>F(n),onSuccess:()=>{f.success("Holiday Created Successfully!"),x.invalidateQueries({queryKey:["holiday"]}),r()}}),o=async n=>{l.mutate(n)};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-50",onClick:r,children:e.jsxs(m.div,{initial:{opacity:.5,y:-50},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white rounded-lg shadow-lg w-full max-w-xl  overflow-hidden",onClick:n=>n.stopPropagation(),children:[e.jsx("div",{className:"",children:e.jsx("p",{className:"bg-gray-200 py-2 px-6 text-xl",children:"Add a New Holiday"})}),e.jsxs("form",{onSubmit:d(o),className:"px-6 py-5 space-y-2",autoComplete:"off",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{type:"text",placeholder:"Name",...s("name",{required:"Please Enter Name of Holiday."}),className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none"}),a?.name&&e.jsx("p",{className:"text-red-500 text-sm",children:a?.name?.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"startDate",children:"Start Date"}),e.jsx("input",{type:"date",id:"startDate",...s("startDate",{required:"Please Enter Start Date."}),className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none"}),a?.startDate&&e.jsx("p",{className:"text-red-500 text-sm",children:a?.startDate?.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"endDate",children:"End Date"}),e.jsx("input",{type:"date",id:"endDate",...s("endDate",{required:"Please Enter End Date."}),className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none"}),a?.endDate&&e.jsx("p",{className:"text-red-500 text-sm",children:a?.endDate?.message})]}),e.jsxs("div",{className:"my-4 text-center",children:[e.jsx("button",{type:"submit",className:"w-full cursor-pointer bg-green-500 hover:bg-green-600 text-white font-medium py-2 rounded mb-3 transition-colors",children:"Submit"}),e.jsx("button",{onClick:r,className:"w-full cursor-pointer border border-gray-300 hover:bg-gray-100 text-gray-700 font-medium py-2 rounded transition-colors",children:"Cancel"})]})]})]})})},A=({details:r,id:s,handleClose:d})=>{const{register:a,handleSubmit:x,formState:{errors:l}}=b({defaultValues:{...r,startDate:r?.startDate.substring(0,10),endDate:r?.endDate.substring(0,10)}}),o=p(),n=y({mutationFn:i=>k(i),onSuccess:i=>{i?.id&&(f.success("Holiday Updated Successfully!"),o.invalidateQueries({queryKey:["holiday"]}),d())}}),u=async i=>{n.mutate({id:s,...i})};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-50",onClick:d,children:e.jsxs(m.div,{initial:{opacity:.5,y:-50},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white rounded-lg shadow-lg w-full max-w-xl  overflow-hidden",onClick:i=>i.stopPropagation(),children:[e.jsx("div",{className:"",children:e.jsx("p",{className:"bg-gray-200 py-2 px-6 text-xl",children:"Edit This Holiday"})}),e.jsxs("form",{onSubmit:x(u),className:"px-6 py-5 space-y-2",autoComplete:"off",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{type:"text",placeholder:"Name",...a("name",{required:"Please Enter Name of Holiday."}),className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none"}),l?.name&&e.jsx("p",{className:"text-red-500 text-sm",children:l?.name?.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"startDate",children:"Start Date"}),e.jsx("input",{type:"date",id:"startDate",...a("startDate",{required:"Please Enter Start Date."}),className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none"}),l?.startDate&&e.jsx("p",{className:"text-red-500 text-sm",children:l?.startDate?.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"endDate",children:"End Date"}),e.jsx("input",{type:"date",id:"endDate",...a("endDate",{required:"Please Enter End Date."}),className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none"}),l?.endDate&&e.jsx("p",{className:"text-red-500 text-sm",children:l?.endDate?.message})]}),e.jsxs("div",{className:"my-4 text-center",children:[e.jsx("button",{type:"submit",className:"w-full cursor-pointer bg-green-500 hover:bg-green-600 text-white font-medium py-2 rounded mb-3 transition-colors",children:"Submit"}),e.jsx("button",{onClick:d,className:"w-full cursor-pointer border border-gray-300 hover:bg-gray-100 text-gray-700 font-medium py-2 rounded transition-colors",children:"Cancel"})]})]})]})})},V=()=>{const[r,s]=c.useState({create:!1,edit:!1,delete:!1}),[d,a]=c.useState(),[x,l]=c.useState({}),[o,n]=c.useState(""),[u,i]=c.useState(""),[h,g]=c.useState(""),N=p(),{data:D,refetch:j}=v({queryKey:["holiday"],queryFn:()=>q(o,u,h)}),w=y({mutationFn:t=>H(t),onSuccess:()=>{N.invalidateQueries({queryKey:["holiday"]})}});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-hidden",children:e.jsxs("div",{className:"p-5",children:[e.jsxs(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:0},children:[e.jsxs("div",{className:"grid grid-cols-4 gap-x-5 gap-y-3",children:[e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("label",{htmlFor:"title",children:"Title"}),e.jsx("input",{type:"text",name:"title",value:o,onChange:t=>n(t?.target?.value),id:"title",placeholder:"Christmas",className:"border border-gray-400 px-3 py-1 rounded-md outline-none"})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("label",{htmlFor:"startDate",children:"Start Date"}),e.jsx("input",{type:"date",name:"startDate",value:u,onChange:t=>i(t?.target?.value),id:"startDate",className:"border border-gray-400 px-3 py-1 rounded-md outline-none"})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("label",{htmlFor:"endDate",children:"End Date"}),e.jsx("input",{type:"date",name:"endDate",value:h,onChange:t=>g(t?.target?.value),id:"endDate",className:"border border-gray-400 px-3 py-1 rounded-md outline-none"})]})]}),e.jsxs("div",{className:"mb-10 mt-3 flex items-center gap-2 text-sm",children:[e.jsx("button",{onClick:()=>j(),className:"bg-green-500 text-white px-10 py-1 rounded-md cursor-pointer",children:"Search"}),e.jsx("button",{onClick:()=>{n(""),i(""),g(""),j()},className:"bg-sky-500 text-white px-10 py-1 rounded-md cursor-pointer",children:"Reset Filters"})]})]}),e.jsxs("div",{className:"mb-5  text-gray-900 bg-white ",children:[e.jsxs(m.div,{initial:{opacity:0,scale:1.2},animate:{opacity:1,scale:1},transition:{duration:.5},className:"flex justify-between items-center origin-center",children:[e.jsx("p",{className:"text-3xl font-semibold uppercase origin-center w-fit",children:"My Workspaces - Holidays"}),e.jsxs("button",{onClick:()=>s({create:!0,edit:!1,delete:!1}),className:"py-1.5 px-7 bg-blue-700 text-white rounded-md text-sm flex gap-1 items-center",children:[e.jsx(S,{className:"text-xl"})," Add Holiday"]})]}),e.jsx(m.p,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.25},className:"mt-1 text-sm font-normal text-gray-700 w-[50%]",children:"All the Important Dates You Need to Know."})]}),e.jsx(m.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative overflow-x-auto shadow-md sm:rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 ",children:[e.jsx("thead",{className:"text-center text-gray-700 uppercase bg-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Sr. No."}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Title"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Start Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"End Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Actions"})]})}),e.jsx("tbody",{children:D?.map(t=>e.jsxs("tr",{className:"capitalize text-center odd:bg-white odd::bg-gray-900 even:bg-gray-50 even::bg-gray-800 border-b :border-gray-700 border-gray-200",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap :text-white",children:t?.id}),e.jsx("td",{className:"px-6 py-4",children:t?.name}),e.jsx("td",{className:"px-6 py-4",children:new Date(t?.startDate).toDateString()}),e.jsx("td",{className:"px-6 py-4",children:new Date(t?.endDate).toDateString()}),e.jsxs("td",{className:"px-6 py-4 flex gap-1 items-center justify-center",children:[e.jsx("button",{onClick:()=>{a(t?.id),l(t),s({create:!1,edit:!0,delete:!1})},className:"font-medium text-white bg-green-500 rounded-md w-fit px-2 py-1 text-sm flex items-center gap-1",children:e.jsx(C,{})}),e.jsx("button",{onClick:()=>{a(t?.id),s({create:!1,edit:!1,delete:!0})},className:"font-medium text-white bg-red-500 rounded-md w-fit px-2 py-1 text-sm flex items-center gap-1",children:e.jsx(E,{})})]})]}))})]})})]})}),r.create&&e.jsx(P,{handleClose:()=>s({create:!1,edit:!1,delete:!1})}),r.edit&&e.jsx(A,{details:x,id:d,handleClose:()=>s({create:!1,edit:!1,delete:!1})}),r.delete&&e.jsx(M,{handleClose:()=>s({create:!1,edit:!1,delete:!1}),handleDelete:()=>w.mutate(d)})]})};export{V as default};
