import{a as o,b as n,V as c,r as u,A as m,e as p,u as y,j as e,m as r}from"./index-BNTtBKWT.js";import{u as f}from"./useMutation-D8AifmkW.js";import{E as h}from"./EmptyState-CVtK2cJb.js";import{L as g}from"./Loader-CIE-sORo.js";const j=async i=>{try{const{data:t}=await o.get(`/user/notification/${i}`);return t}catch(t){return console.log(t),n.isAxiosError(t)&&c.error(t?.response?.data?.message),t}},w=async(i,t)=>{try{const{data:a}=await o.delete(`/user/notification/${i}/${t}`);return a}catch(a){return console.log(a),n.isAxiosError(a)&&c.error(a?.response?.data?.message),a}},E=()=>{const{user:i}=u.useContext(m),t=p(),{data:a=[],isLoading:l}=y({queryKey:["notif"],queryFn:()=>j(i?.id)}),d=f({mutationKey:["del-notif"],mutationFn:s=>w(i?.id,s),onSuccess:()=>{t.invalidateQueries({queryKey:["notif"]})}});return e.jsx("div",{children:e.jsx("div",{className:"overflow-y-scroll h-screen",children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"mb-5  text-gray-900 bg-white ",children:[e.jsxs(r.p,{initial:{opacity:0,scale:1.2},animate:{opacity:1,scale:1},transition:{duration:.5},className:"text-3xl font-semibold uppercase origin-center w-fit",children:["Good Day, ","User"]}),e.jsx(r.p,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.25},className:"mt-1 text-sm font-normal text-gray-700 w-[50%]",children:"Hope you are having energetic and productive day."})]}),e.jsx("div",{className:"max-w-3xl mx-auto space-y-5",children:l?e.jsx(g,{}):a?.length>0?a?.map((s,x)=>e.jsx(r.article,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:x*.2},className:`px-4 py-2 rounded-md shadow-lg flex gap-x-2 ${s?.type==="urgent"?"bg-red-500 text-white":""} ${s?.type==="moderate"?"bg-yellow-500 text-white":""}`,children:e.jsxs("div",{className:"w-full",children:[e.jsx("p",{className:"capitalize font-semibold text-xl ",children:s?.title}),e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s?.content}),e.jsxs("div",{className:"flex justify-between items-baseline w-full mt-2",children:[e.jsx("button",{onClick:()=>d.mutate(s?.id),className:`capitalize bg-green-400 text-white/95 text-xs font-semibold \r
                                    px-6 py-1 rounded-md cursor-pointer hover:scale-105 transition duration-200`,children:"mark as read"}),e.jsx("p",{className:"text-xs",children:new Date(s?.createdAt).toDateString()})]})]})},s.id)):e.jsx(h,{})})]})})})};export{E as default};
