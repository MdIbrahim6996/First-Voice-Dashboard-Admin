import{r as o,u as P,j as e,m}from"./index-BNTtBKWT.js";import{a as T}from"./lead-DAKLIK_6.js";import{L as O}from"./Loader-CIE-sORo.js";import{E as F}from"./EmptyState-CVtK2cJb.js";import{C as _,F as M}from"./index-Ctob-Qf-.js";import"./index-1qb7Au9R.js";const H=()=>{const[h,y]=o.useState(""),[u,b]=o.useState(""),[f,N]=o.useState(""),[j,g]=o.useState(""),[w,C]=o.useState(30),v=o.useRef(null),k=o.useRef(null),D=o.useRef(null);o.useEffect(()=>{const a=v.current,l=k.current;if(!a||!l)return;const r=()=>l.scrollLeft=a.scrollLeft,t=()=>a.scrollLeft=l.scrollLeft;return a.addEventListener("scroll",r),l.addEventListener("scroll",t),()=>{a.removeEventListener("scroll",r),l.removeEventListener("scroll",t)}});const[s,d]=o.useState(1),{data:p,refetch:i,isLoading:S,isFetching:E}=P({queryKey:["old-leadforms",s],queryFn:()=>T(h,u,f,j,s,w),placeholderData:!0}),n=p?.leads?.json,R=()=>{y(""),b(""),N(""),g(""),i()},A=[{label:"ID",key:"id"},{label:"USER ID",key:"user_id"},{label:"SALE AT",key:"sale_at"},{label:"SALUTATION",key:"closer_user_id"},{label:"FIRST NAME",key:"fname"},{label:"MIDDLE NAME",key:"mname"},{label:"LAST NAME",key:"lname"},{label:"CENTRE",key:"centre"},{label:"ADDRESS",key:"address1"},{label:"CITY",key:"city"},{label:"COUNTY",key:"country"},{label:"POST CODE",key:"pin"},{label:"DATE OF BIRTH",key:"dob"},{label:"PASSWORD",key:"password"},{label:"PHONE",key:"phone"},{label:"PROCESS",key:"process"},{label:"PLAN",key:"plan"},{label:"FEE",key:"fee"},{label:"CURRENCY",key:"currency"},{label:"BANK NAME",key:"bank_name"},{label:"ACCOUNT NAME",key:"account_name"},{label:"ACCOUNT NUMBER",key:"account_no"},{label:"SORT",key:"sort_code"},{label:"CARD TYPE",key:"card_type"},{label:"CARD NUMBER",key:"card_no"},{label:"EXPIRY MONTH",key:"expiry_month"},{label:"EXPIRY YEAR",key:"expiry_year"},{label:"CARD CVV",key:"card_cvv"},{label:"COMMENT",key:"comments"}],L=[30,50,100,500,1e3];return e.jsx(e.Fragment,{children:e.jsx("div",{className:"overflow-hidden",children:e.jsxs("div",{className:"p-5",children:[e.jsxs(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:0},children:[e.jsxs("div",{className:"grid grid-cols-5 gap-x-3 gap-y-3",children:[e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("label",{htmlFor:"phone",children:"Phone"}),e.jsx("input",{autoComplete:"off",type:"text",name:"phone",placeholder:"PHONE",value:h,onChange:a=>y(a?.target?.value),onKeyDown:a=>{a.key==="Enter"&&i()},id:"phone",className:"border border-gray-400 px-3 py-1 rounded-md outline-none"})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("label",{htmlFor:"post",children:"Post Code"}),e.jsx("input",{autoComplete:"off",type:"text",name:"post",placeholder:"POST CODE",value:u,onChange:a=>b(a?.target?.value),onKeyDown:a=>{a.key==="Enter"&&i()},id:"post",className:"border border-gray-400 px-3 py-1 rounded-md outline-none"})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("label",{htmlFor:"fromDate",children:"From Date"}),e.jsx("input",{type:"date",name:"fromDate",value:f,id:"fromDate",onChange:a=>N(a.target.value),className:"border border-gray-400 px-3 py-1 rounded-md outline-none"})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("label",{htmlFor:"toDate",children:"To Date"}),e.jsx("input",{type:"date",name:"toDate",value:j,id:"toDate",onChange:a=>g(a.target.value),className:"border border-gray-400 px-3 py-1 rounded-md outline-none"})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("label",{htmlFor:"limit",children:"Limit Per Page"}),e.jsx("select",{name:"limit",onChange:a=>C(a?.target?.value),id:"limit",className:"border outline-none border-gray-400 px-3 py-1 rounded-md",children:L?.map(a=>e.jsx("option",{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"mb-10 mt-3 flex items-center gap-2 text-sm",children:[e.jsx("button",{onClick:()=>i(),className:"bg-green-500 text-white px-10 py-1 rounded-md cursor-pointer",children:"Search"}),e.jsx("button",{onClick:R,className:"bg-sky-500 text-white px-10 py-1 rounded-md cursor-pointer",children:"Reset Filters"})]})]}),e.jsxs(m.div,{initial:{opacity:0,scale:1.2},animate:{opacity:1,scale:1},transition:{duration:.5},className:"mb-5 text-gray-900 bg-white flex justify-between items-center",children:[e.jsx("p",{className:"text-3xl font-semibold uppercase origin-center w-fit",children:"Leads - All Old Leads"}),e.jsx(_,{headers:A,data:n||[],filename:"OldLead.csv",children:e.jsxs("button",{className:"py-1.5 px-7 bg-green-700 text-white rounded-md text-sm flex gap-1 items-center cursor-pointer",children:[e.jsx(M,{className:"text-lg"})," Export as CSV"]})})]}),e.jsxs(m.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative overflow-x-auto shadow-md sm:rounded-lg w-full",children:[e.jsx("div",{ref:v,style:{overflowX:"auto",overflowY:"hidden",height:"20px"},children:e.jsx("div",{style:{width:"2000px",height:"1px"}})}),e.jsxs("div",{ref:k,style:{overflowX:"auto",overflowY:"hidden",width:"100%"},children:[(S||E)&&e.jsx(O,{}),n?.length>0&&!E&&e.jsxs("table",{ref:D,className:"text-sm text-left rtl:text-right text-gray-500",children:[e.jsx("thead",{className:"text-center text-gray-700 uppercase bg-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"whitespace-nowrap px-6 py-3",children:"Sr. No."}),e.jsx("th",{scope:"col",className:"whitespace-nowrap px-6 py-3",children:"date"}),e.jsx("th",{scope:"col",className:"whitespace-nowrap px-6 py-3",children:"salutation"}),e.jsx("th",{scope:"col",className:"whitespace-nowrap px-6 py-3",children:"First Name"}),e.jsx("th",{scope:"col",className:"whitespace-nowrap px-6 py-3",children:"Last Name"}),e.jsx("th",{scope:"col",className:"whitespace-nowrap px-6 py-3",children:"Post Code"}),e.jsx("th",{scope:"col",className:"whitespace-nowrap px-6 py-3",children:"Phone No."}),e.jsx("th",{scope:"col",className:"whitespace-nowrap px-6 py-3",children:"Process"})]})}),e.jsx("tbody",{children:n?.map((a,l)=>e.jsxs("tr",{className:"capitalize text-center border-b :border-gray-700 border-gray-200",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap :text-white",children:(s-1)*w+l+1}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap uppercase",children:new Date(a?.sale_at).toDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap uppercase",children:a?.salutation}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap uppercase",children:a?.fname}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap uppercase",children:a?.lname}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap uppercase",children:a?.pin}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a?.phone}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap uppercase",children:a?.process})]},a?.id))})]}),(!n||n.length===0)&&e.jsx(F,{})]})]}),n?.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 items-center w-fit mx-auto",children:[e.jsx("button",{disabled:s===1,onClick:()=>d(a=>Math.max(a-1,1)),className:"bg-red-500 text-white text-xs font-semibold px-6 py-1 rounded-md capitalize cursor-pointer disabled:cursor-not-allowed",children:"Prev"}),(()=>{const a=p?.totalPages||0,l=5;let r=[];if(a<=7)r=Array.from({length:a},(t,c)=>c+1);else{r.push(1),s>l&&r.push("...");const t=Math.max(2,s-2),c=Math.min(a-1,s+2);for(let x=t;x<=c;x++)r.push(x);s<a-(l-1)&&r.push("..."),r.push(a)}return r.map((t,c)=>t==="..."?e.jsx("span",{className:"px-3 py-1",children:"..."},c):e.jsx("button",{onClick:()=>d(t),className:`text-xs font-semibold px-6 py-1 rounded-md capitalize cursor-pointer ${t===s?"bg-sky-500 text-white":"bg-white text-black border border-slate-400"}`,children:t},t))})(),e.jsx("button",{disabled:s===p?.totalPages,onClick:()=>d(a=>a+1),className:"bg-blue-700 text-white text-xs font-semibold px-6 py-1 rounded-md capitalize cursor-pointer disabled:cursor-not-allowed",children:"Next"})]})]})})})};export{H as default};
