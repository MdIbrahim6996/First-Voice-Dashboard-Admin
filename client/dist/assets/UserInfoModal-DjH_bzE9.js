import{c as j,r as u,e as y,u as c,V as f,j as e,m,n as N,b as S,S as E}from"./index-DodWdPz7.js";import{c as P,u as C,b as k,e as F}from"./user-DXMVRT2F.js";import{u as g}from"./useMutation-hiPJ6IwI.js";import{g as w}from"./process-nPqXU2SE.js";import{r as A,f as p,P as q,B as U}from"./utils-B54-Ev5Q.js";import{a as R}from"./userAttendance-C1jvRGK6.js";const B=({handleClose:a})=>{const{register:s,handleSubmit:t,watch:r,formState:{errors:l}}=j(),[d,o]=u.useState(!1),x=r("role"),h=y(),{data:b}=c({queryKey:["process"],queryFn:w}),n=g({mutationFn:i=>P(i),onSuccess:i=>{i?.id&&(f.success("User Created Successfully!"),h.invalidateQueries({queryKey:["user"]}),a())}}),v=i=>{n.mutate(i)};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-50",onClick:a,children:e.jsxs(m.div,{initial:{opacity:.5,y:-50},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white rounded-lg shadow-lg w-full max-w-xl overflow-y-scroll max-h-[90vh]",onClick:i=>i.stopPropagation(),children:[e.jsx("div",{className:"",children:e.jsx("p",{className:"bg-gray-200 py-2 px-6 text-xl",children:"Add a New User"})}),e.jsxs("form",{onSubmit:t(v),className:"px-6 py-5 space-y-3",autoComplete:"off",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"employeeId",className:"text-sm font-semibold",children:"Employee Id"}),e.jsx("input",{type:"text",placeholder:"Employee Id",...s("employeeId",{required:"Please Enter Employee Id."}),className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none"}),l.employeeId&&e.jsx("p",{className:"text-red-500 text-sm",children:l?.employeeId?.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"text-sm font-semibold",children:"Name"}),e.jsx("input",{type:"text",placeholder:"Name",...s("name",{required:"Please Enter Name."}),className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none"}),l.name&&e.jsx("p",{className:"text-red-500 text-sm",children:l?.name?.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"alias",className:"text-sm font-semibold",children:"Alias"}),e.jsx("input",{type:"text",placeholder:"Alias",...s("alias",{required:"Please Enter Alias Name."}),className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none"}),l.alias&&e.jsx("p",{className:"text-red-500 text-sm",children:l?.alias?.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"text-sm font-semibold",children:"Email"}),e.jsx("input",{type:"email",placeholder:"Email",...s("email",{required:"Please Enter Email Address."}),className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none"}),l.email&&e.jsx("p",{className:"text-red-500 text-sm",children:l?.email?.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"text-sm font-semibold",children:"Phone"}),e.jsx("input",{type:"tel",maxLength:10,placeholder:"(033) 2345 9675",...s("phone",{required:"Please Enter Phone Number."}),className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none"}),l.phone&&e.jsx("p",{className:"text-red-500 text-sm",children:l?.phone?.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"text-sm font-semibold",children:"Role"}),e.jsxs("select",{id:"role",...s("role",{required:"Please Select a Role."}),className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none",children:[e.jsx("option",{value:"",selected:!0,disabled:!0,children:"Select a Role"}),e.jsx("option",{value:"admin",children:"ADMIN"}),e.jsx("option",{value:"superadmin",children:"SUPERADMIN"}),e.jsx("option",{value:"user",children:"USER"}),e.jsx("option",{value:"closer",children:"CLOSER"}),e.jsx("option",{value:"verifier",children:"VERIFIER"})]}),l.role&&e.jsx("p",{className:"text-red-500 text-sm",children:l?.role?.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"process",className:"text-sm font-semibold",children:"Process"}),e.jsxs("select",{id:"process",...s("process",{required:"Please Select a Process."}),className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none",multiple:x==="closer"||x==="verifier",children:[e.jsx("option",{value:"",selected:!0,disabled:!0,children:"Select a Process"}),b?.map(i=>e.jsx("option",{value:i?.id,className:"uppercase",children:i?.name}))]}),l.process&&e.jsx("p",{className:"text-red-500 text-sm",children:l?.process?.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aloowLogin",className:"text-sm font-semibold",children:"Block This User"}),e.jsxs("select",{...s("block"),id:"aloowLogin",className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none",children:[e.jsx("option",{value:"true",children:"true"}),e.jsx("option",{selected:!0,value:"false",children:"false"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"text-sm font-semibold",children:"Password"}),e.jsxs("div",{className:"flex items-center justify-between border border-gray-400 rounded-md",children:[e.jsx("input",{type:d?"text":"password",placeholder:"*********",...s("password",{required:"Please Enter Password."}),className:"w-full px-2 py-1  outline-none"}),e.jsx("button",{type:"button",onClick:()=>o(!d),className:"text-black/70 mr-2",children:e.jsx(N,{})})]}),l.password&&e.jsx("p",{className:"text-red-500 text-sm",children:l?.password?.message})]}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("button",{type:"submit",className:"w-full cursor-pointer bg-green-500 hover:bg-green-600 text-white font-medium py-2 rounded mb-1 transition-colors",children:"Submit"}),e.jsx("button",{onClick:a,className:"w-full cursor-pointer border border-gray-300 hover:bg-gray-100 text-gray-700 font-medium py-2 rounded transition-colors",children:"Cancel"})]})]})]})})},Q=({handleClose:a,detail:s})=>{console.log(s);const{register:t,handleSubmit:r}=j({defaultValues:{...s,password:"",block:s?.isBlocked?1:0,process:s?.processId}}),[l,d]=u.useState(!1),o=y(),{data:x}=c({queryKey:["process"],queryFn:w}),{mutate:h}=g({mutationKey:["updateUser"],mutationFn:C,onSuccess:n=>{n?.id&&(f.success("User Updated Successfully."),o.invalidateQueries({queryKey:["user"]}),a())}}),b=n=>{console.log(n),h({...n,id:s?.id})};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-50",onClick:a,children:e.jsxs(m.div,{initial:{opacity:.5,y:-50},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white rounded-lg shadow-lg w-full max-w-xl overflow-y-scroll max-h-[90vh]",onClick:n=>n.stopPropagation(),children:[e.jsx("div",{className:"",children:e.jsx("p",{className:"bg-gray-200 py-2 px-6 text-xl",children:"Add a New User"})}),e.jsxs("form",{onSubmit:r(b),className:"px-6 py-5 space-y-3",autoComplete:"off",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"employeeId",className:"text-sm font-semibold",children:"Employee Id"}),e.jsx("input",{type:"text",placeholder:"Employee Id",...t("employeeId",{required:"Please Enter Employee Id."}),className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"text-sm font-semibold",children:"Name"}),e.jsx("input",{type:"text",placeholder:"Name",...t("name"),className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"alias",className:"text-sm font-semibold",children:"Alias"}),e.jsx("input",{type:"text",placeholder:"Alias",...t("alias"),className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"text-sm font-semibold",children:"Email"}),e.jsx("input",{type:"email",placeholder:"Email",...t("email"),className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"text-sm font-semibold",children:"Phone"}),e.jsx("input",{type:"tel",maxLength:10,placeholder:"(033) 2345 9675",...t("phone"),className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"text-sm font-semibold",children:"Role"}),e.jsxs("select",{id:"role",...t("role"),className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none",children:[e.jsx("option",{value:"",selected:!0,disabled:!0,children:"Select a Role"}),e.jsx("option",{value:"admin",children:"ADMIN"}),e.jsx("option",{value:"superadmin",children:"SUPERADMIN"}),e.jsx("option",{value:"user",children:"USER"}),e.jsx("option",{value:"closer",children:"CLOSER"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"process",className:"text-sm font-semibold",children:"Process"}),e.jsxs("select",{id:"process",...t("process"),className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none",children:[e.jsx("option",{value:"",selected:!0,disabled:!0,children:"Select a Process"}),x?.map(n=>e.jsx("option",{value:n?.id,className:"uppercase",children:n?.name}))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"allowLogin",className:"text-sm font-semibold",children:"Block This User"}),e.jsxs("select",{...t("block"),id:"allowLogin",className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:1,children:"true"}),e.jsx("option",{selected:!0,value:0,children:"false"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"text-sm font-semibold",children:"Password"}),e.jsxs("div",{className:"flex items-center justify-between border border-gray-400 rounded-md",children:[e.jsx("input",{type:l?"text":"password",placeholder:"*********",...t("password"),className:"w-full px-2 py-1  outline-none"}),e.jsx("button",{type:"button",onClick:()=>d(!l),className:"text-black/70 mr-2",children:e.jsx(N,{})})]})]}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("button",{type:"submit",className:"w-full cursor-pointer bg-green-500 hover:bg-green-600 text-white font-medium py-2 rounded mb-1 transition-colors",children:"Submit"}),e.jsx("button",{type:"button",onClick:a,className:"w-full cursor-pointer border border-gray-300 hover:bg-gray-100 text-gray-700 font-medium py-2 rounded transition-colors",children:"Cancel"})]})]})]})})},I=({userId:a})=>{const[s,t]=u.useState("thisMonth"),{data:r=[]}=c({queryKey:[`profile-${a}`,s],queryFn:()=>k(a,s)}),{data:l}=c({queryKey:[`profile-${a}`],queryFn:()=>F(a)}),d={datasets:[{data:r?.map(o=>o?.count),backgroundColor:r.map(o=>A(o?.status))}],labels:r?.map(o=>o?.status?.toUpperCase())};return e.jsx("section",{className:"p-4",children:e.jsxs(m.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative overflow-x-auto ",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("p",{className:"text-3xl italic mb-2 text-black/80",children:[e.jsx("span",{className:"capitalize",children:s}),"'s Analytics"]}),e.jsx("div",{children:e.jsxs("select",{onClick:o=>t(o.target.value),defaultValue:"thisMonth",className:"border border-slate-400 px-5 py-1 rounded-md text-sm cursor-pointer outline-none",children:[e.jsx("option",{value:"today",children:"TODAY"}),e.jsx("option",{value:"thisMonth",children:"THIS MONTH"}),e.jsx("option",{value:"thisYear",children:"THIS YEAR"})]})})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-3 mb-10",children:[e.jsxs("article",{className:"bg-sky-400 text-white p-3 rounded-md text-center shadow-xl bg-gradient-to-b from-teal-400 to-yellow-200",children:[e.jsx("p",{className:"text-2xl capitalize",children:"today's sale"}),e.jsx("p",{className:"mt-2 text-3xl",children:p(l?.todayLead)})]}),e.jsxs("article",{className:"bg-green-400 text-white p-3 rounded-md text-center shadow-xl bg-gradient-to-b from-fuchsia-600 to-pink-300",children:[e.jsx("p",{className:"text-2xl capitalize",children:"Month's Sale"}),e.jsx("p",{className:"mt-2 text-2xl",children:p(l?.totalSuccessLead)})]}),e.jsxs("article",{className:"bg-red-400 text-white p-3 rounded-md text-center shadow-xl bg-gradient-to-t from-emerald-300 to-emerald-900",children:[e.jsx("p",{className:"text-2xl capitalize",children:"Gross Sales"}),e.jsx("p",{className:"mt-2 text-2xl",children:p(l?.totalLead)})]}),e.jsxs("article",{className:"bg-blue-700 text-white p-3 rounded-md text-center shadow-xl bg-gradient-to-b from-red-500 to-orange-300",children:[e.jsx("p",{className:"text-2xl capitalize",children:"SPD"}),e.jsx("p",{className:"mt-2 text-2xl",children:l?.spd})]}),e.jsxs("article",{className:"bg-sky-400 text-white p-3 rounded-md text-center shadow-xl bg-gradient-to-bl from-[#e879f9] via-[#4ade80]",children:[e.jsx("p",{className:"text-2xl capitalize",children:"attendance"}),e.jsx("p",{className:"mt-2 text-3xl",children:p(l?.totalAttendance)})]})]}),e.jsx("div",{className:"h-[17rem] mx-auto w-fit",children:e.jsx(q,{data:d})})]})})},M=async a=>{try{const{data:s}=await S.get(`${E}/superadmin/notification/${a}`,{withCredentials:!0});return s}catch(s){console.log(s)}},z=({userId:a})=>{const{data:s}=c({queryKey:["admin-notif",a],queryFn:()=>M(a)});return e.jsxs("section",{className:"p-4",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-2xl text-center my-4",children:[s?.length," ",s?.length>1?"Notifications":"Notification"]})}),e.jsx("div",{className:"max-w-3xl mx-auto space-y-5",children:s?.map((t,r)=>e.jsx(m.article,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:r*.2},className:"px-4 py-2 rounded-md shadow-lg flex gap-x-2 border-t border-slate-300",children:e.jsxs("div",{children:[e.jsx("p",{className:"capitalize font-semibold text-xl",children:t?.title}),e.jsx("p",{className:"text-sm",children:t?.content}),e.jsx("div",{children:e.jsx("button",{disabled:!0,className:`capitalize bg-green-400 text-white/95 text-xs font-semibold \r
                                    px-6 py-1 rounded-md mt-2 cursor-not-allowed hover:scale-105 transition duration-200`,children:"mark as read"})})]})},t.id))})]})},L=({userId:a})=>{const{data:s=[]}=c({queryKey:["bar-chart"],queryFn:()=>R(a)});console.log(s);let t={labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"ON TIME",fillColor:"blue",data:s?.graphData?.ontimeArray},{label:"LATE",fillColor:"red",data:s?.graphData?.lateArray}]};return e.jsxs("div",{className:"shadow-xl p-4 rounded-md w-[80%] mx-auto",children:[e.jsx("p",{className:"text-xl uppercase mb-3 font-semibold",children:"monthly overview"}),e.jsx("div",{className:"h-[20rem] mx-auto w-fi",children:e.jsx(U,{data:t,options:{maintainAspectRatio:!1}})})]})},H=({handleClose:a,userId:s})=>{const[t,r]=u.useState("profile");return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-50",children:e.jsxs(m.div,{initial:{opacity:.5,y:-50},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white rounded-lg shadow-lg w-full max-w-5xl overflow-y-scroll max-h-[90vh]",children:[e.jsx("div",{className:"",children:e.jsx("p",{className:"bg-gray-200 py-2 px-6 text-xl",children:"View User Info"})}),e.jsx("div",{className:"px-4 py-2",children:e.jsx("div",{children:e.jsxs("div",{className:"border border-slate-200 bg-slate-200 shadow-2xl rounded-md flex justify-between items-center",children:[e.jsx("button",{onClick:()=>r("profile"),className:`
                                ${t==="profile"?"bg-white font-[500]":"bg-slate-200"}
                                 rounded-md flex-1 text-center capitalize m-1 cursor-pointer hover:font-[500]`,children:"profile"}),e.jsx("button",{onClick:()=>r("attendance"),className:`${t==="attendance"?"bg-white font-[500]":"bg-slate-200"} rounded-md flex-1 text-center capitalize m-1 cursor-pointer hover:font-[500]`,children:"attendance"}),e.jsx("button",{onClick:()=>r("notifications"),className:` ${t==="notifications"?"bg-white font-[500]":"bg-slate-200"} rounded-md flex-1 text-center capitalize m-1 cursor-pointer hover:font-[500]`,children:"notifications"})]})})}),t==="profile"&&e.jsx(I,{userId:s}),t==="attendance"&&e.jsx(L,{userId:s}),t==="notifications"&&e.jsx(z,{userId:s}),e.jsx("div",{className:"p-4 px-6 text-center",children:e.jsx("button",{onClick:a,className:"w-full cursor-pointer border border-gray-300 hover:bg-gray-100 text-gray-700 font-medium py-2 rounded transition-colors",children:"Cancel"})})]})})};export{B as C,Q as E,H as U};
