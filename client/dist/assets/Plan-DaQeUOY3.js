import{e as f,u,c as j,V as N,j as e,m as x,r as p,o as h,l as w,n as v,f as C}from"./index-DodWdPz7.js";import{u as g}from"./useMutation-hiPJ6IwI.js";import{g as P}from"./process-nPqXU2SE.js";import{c as k,a as S,d as M,g as q}from"./plan-CqCSfXHT.js";import{D as F}from"./DeleteModal-CgHvfu17.js";import{r as c,P as y,B as A}from"./utils-B54-Ev5Q.js";const D=({handleClose:o})=>{const n=f(),{data:a}=u({queryKey:["process"],queryFn:P}),{register:i,formState:{errors:s},handleSubmit:d}=j(),m=g({mutationFn:r=>k(r),onSuccess:()=>{N.success("Plan Created Successfully!"),n.invalidateQueries({queryKey:["plan"]}),o()}}),l=r=>{m.mutate(r)};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-50",onClick:o,children:e.jsxs(x.div,{initial:{opacity:.5,y:-50},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white rounded-lg shadow-lg w-full max-w-xl  overflow-hidden",onClick:r=>r.stopPropagation(),children:[e.jsx("div",{className:"",children:e.jsx("p",{className:"bg-gray-200 py-2 px-6 text-xl",children:"Add a New Plan"})}),e.jsxs("form",{onSubmit:d(l),className:"px-6 py-5 space-y-2",autoComplete:"off",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{type:"text",autoFocus:!0,placeholder:"Name",...i("name",{required:"Please enter Plan Name."}),className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none"}),s?.name&&e.jsx("p",{className:"text-red-500 text-sm",children:s?.name?.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"process",children:"Process"}),e.jsxs("select",{id:"process",className:"w-full border border-gray-400 px-2 py-1 rounded-md outline-none",...i("process",{required:"Please select a Process."}),children:[e.jsx("option",{value:"",children:"Select an Option"}),a?.map(r=>e.jsx("option",{value:r.id,className:"uppercase",children:r.name}))]}),s?.process&&e.jsx("p",{className:"text-red-500 text-sm",children:s?.process?.message})]}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("button",{type:"submit",className:"w-full cursor-pointer bg-green-500 hover:bg-green-600 text-white font-medium py-2 rounded-md mb-1 transition-colors",children:"Submit"}),e.jsx("button",{onClick:o,className:"w-full cursor-pointer border border-gray-300 hover:bg-gray-100 text-gray-700 font-medium py-2 rounded-md transition-colors",children:"Cancel"})]})]})]})})},E=({handleClose:o,id:n})=>{const[a,i]=p.useState("thisMonth"),{data:s}=u({queryKey:[`process-info-${n}`,a],queryFn:()=>S(n,a)}),d={datasets:[{data:s?.map(t=>t?.count),backgroundColor:s?.map(t=>c(t?.name))}],labels:s?.map(t=>t?.name?.toUpperCase())},m={datasets:[{data:s?.map(t=>t?.count),backgroundColor:s?.map(t=>c(t?.name))}],labels:s?.map(t=>t?.name?.toUpperCase())},l={labels:h?.map(t=>t?.substring(0,3)),datasets:[{label:"SUCCESS",data:s?.map(t=>t?.success),backgroundColor:c("success")},{label:"PENDING",data:s?.map(t=>t?.pending),backgroundColor:c("pending")},{label:"CANCELLED",data:s?.map(t=>t?.cancelled),backgroundColor:c("cancelled")},{label:"REWORK/WARMUP",data:s?.map(t=>t?.rework),backgroundColor:c("rework/warmup")}]},r=new Date,b=r.getMonth();return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-50",onClick:o,children:e.jsxs(x.div,{initial:{opacity:.5,y:-50},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white rounded-lg shadow-lg w-full max-w-xl  overflow-hidden",onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"",children:e.jsx("p",{className:"bg-gray-200 py-2 px-6 text-xl",children:"Plan Information."})}),e.jsxs("div",{className:"px-4 py-2",children:[e.jsxs("div",{className:"border border-slate-200 bg-slate-200 shadow-2xl rounded-md flex justify-between items-center",children:[e.jsxs("button",{onClick:()=>i("thisMonth"),className:`
                                ${a==="thisMonth"?"bg-white":"bg-slate-200"}
                                 rounded-md flex-1 text-center capitalize m-1 cursor-pointer hover:font-[500]`,children:["this month (",h[b],")"]}),e.jsxs("button",{onClick:()=>i("thisYear"),className:`${a==="thisYear"?"bg-white":"bg-slate-200"} rounded-md flex-1 text-center capitalize m-1 cursor-pointer hover:font-[500]`,children:["this year (",r.getFullYear(),")"]}),e.jsx("button",{onClick:()=>i("monthly"),className:` ${a==="monthly"?"bg-white":"bg-slate-200"} rounded-md flex-1 text-center capitalize m-1 cursor-pointer hover:font-[500]`,children:"monthly"})]}),e.jsxs("div",{children:[a==="thisMonth"&&e.jsx("div",{className:"w-[24rem] mx-auto",children:e.jsx(y,{data:m})}),a==="thisYear"&&e.jsx("div",{className:"w-[24rem] mx-auto",children:e.jsx(y,{data:d})}),a==="monthly"&&e.jsx("div",{className:"h-[25rem]",children:e.jsx(A,{data:l,options:{maintainAspectRatio:!1},className:"h-full"})})]}),e.jsx("div",{className:"mt-4  text-center",children:e.jsx("button",{onClick:o,className:"w-full cursor-pointer border border-gray-300 hover:bg-gray-100 text-gray-700 font-medium py-2 rounded transition-colors",children:"Close"})})]})]})})},Y=()=>{const[o,n]=p.useState({create:!1,delete:!1,info:!1}),[a,i]=p.useState(),s=f(),{data:d}=u({queryKey:["plan"],queryFn:q}),m=g({mutationFn:l=>M(l),onSuccess:()=>{s.invalidateQueries({queryKey:["plan"]})}});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-hidden",children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"mb-5  text-gray-900 bg-white ",children:[e.jsxs(x.div,{initial:{opacity:0,scale:1.2},animate:{opacity:1,scale:1},transition:{duration:.5},className:"flex justify-between items-center origin-center",children:[e.jsx("p",{className:"text-3xl font-semibold uppercase origin-center w-fit",children:"Plan - All Plan"}),e.jsxs("button",{onClick:()=>n({create:!0,delete:!1,info:!1}),className:"py-1.5 px-7 bg-blue-700 text-white rounded-md text-sm flex gap-1 items-center",children:[e.jsx(w,{className:"text-xl"})," Add Plan"]})]}),e.jsx(x.p,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.25},className:"mt-1 text-sm font-normal text-gray-700 w-[50%]",children:"Browse a list of Flowbite products designed to help you work and play, stay organized, get answers, keep in touch, grow your business, and more."})]}),e.jsx(x.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative overflow-x-auto shadow-md sm:rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 ",children:[e.jsx("thead",{className:"text-center text-gray-700 uppercase bg-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Sr. No."}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"process"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Actions"})]})}),e.jsx("tbody",{children:d?.map((l,r)=>e.jsxs("tr",{className:"capitalize text-center odd:bg-white odd::bg-gray-900 even:bg-gray-50 even::bg-gray-800 border-b :border-gray-700 border-gray-200",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap :text-white",children:r+1}),e.jsx("td",{className:"px-6 py-4",children:l?.name}),e.jsx("td",{className:"px-6 py-4",children:l?.process?.name}),e.jsxs("td",{className:"px-6 py-4 flex gap-1 items-center justify-center",children:[e.jsx("button",{onClick:()=>{i(l.id),n({create:!1,delete:!1,info:!0})},className:"font-medium text-white bg-green-500 rounded-md w-fit px-2 py-1 text-sm flex items-center gap-1",children:e.jsx(v,{})}),e.jsx("button",{onClick:()=>{i(l.id),n({create:!1,delete:!0,info:!1})},className:"font-medium text-white bg-red-500 rounded-md w-fit px-2 py-1 text-sm flex items-center gap-1",children:e.jsx(C,{})})]})]},l?.id))})]})})]})}),o.create&&e.jsx(D,{handleClose:()=>n({create:!1,delete:!1,info:!1})}),o.info&&e.jsx(E,{handleClose:()=>n({create:!1,delete:!1,info:!1}),id:a}),o.delete&&e.jsx(F,{handleClose:()=>n({create:!1,delete:!1,info:!1}),handleDelete:()=>m.mutate(a)})]})};export{Y as default};
